"use strict";!function(){function t(t,e){for(var i in t){var n=t[i],s=this.input.getAttribute("data-"+i.toLowerCase());"number"==typeof n?this[i]=parseInt(s):n===!1?this[i]=null!==s:n instanceof Function?this[i]=null:this[i]=s,this[i]||0===this[i]||(this[i]=i in e?e[i]:n)}}function $(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function e(t,e){return s.call((e||document).querySelectorAll(t))}function i(){e("input.awesomplete").forEach(function(t){new n(t)})}var n=function(e,i){var s=this;this.input=$(e),this.input.setAttribute("autocomplete","false"),this.input.setAttribute("aria-autocomplete","list"),i=i||{},t.call(this,{minChars:2,maxItems:10,autoFirst:!1,filter:n.FILTER_CONTAINS,sort:n.SORT_BYLENGTH,item:function(t,e){return $.create("li",{innerHTML:t.replace(RegExp($.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false"})},replace:function(t){this.input.value=t}},i),this.index=-1,this.container=$.create("div",{className:"awesomplete",around:e}),this.ul=$.create("ul",{hidden:"",inside:this.container}),this.status=$.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),$.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this),keydown:function(t){var e=t.keyCode;s.opened&&(13===e&&s.selected?(t.preventDefault(),s.select()):27===e?s.close():(38===e||40===e)&&(t.preventDefault(),s[38===e?"previous":"next"]()))}}),$.bind(this.input.form,{submit:this.close.bind(this)}),$.bind(this.ul,{mousedown:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&s.select(e)}}}),this.input.hasAttribute("list")?(this.list="#"+e.getAttribute("list"),e.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||i.list||[],n.all.push(this)};n.prototype={set list(t){Array.isArray(t)?this._list=t:"string"==typeof t&&t.indexOf(",")>-1?this._list=t.split(/\s*,\s*/):(t=$(t),t&&t.children&&(this._list=s.apply(t.children).map(function(t){return t.textContent.trim()}))),document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.ul&&null===this.ul.getAttribute("hidden")},close:function(){this.ul.setAttribute("hidden",""),this.index=-1,$.fire(this.input,"awesomplete-close")},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this["goto"](0),$.fire(this.input,"awesomplete-open")},next:function(){var t=this.ul.children.length;this["goto"](this.index<t-1?this.index+1:-1)},previous:function(){var t=this.ul.children.length;this["goto"](this.selected?this.index-1:t-1)},"goto":function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent),$.fire(this.input,"awesomplete-highlight")},select:function(t){if(t=t||this.ul.children[this.index]){var e;$.fire(this.input,"awesomplete-select",{text:t.textContent,preventDefault:function(){e=!0}}),e||(this.replace(t.textContent),console.log(t.textContent),this.close(),$.fire(this.input,"awesomplete-selectcomplete"))}},evaluate:function(){var t=this,e=this.input.value;e.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this._list.filter(function(i){return t.filter(i,e)}).sort(this.sort).every(function(i,n){return t.ul.appendChild(t.item(i,e)),n<t.maxItems-1}),0===this.ul.children.length?this.close():this.open()):this.close()}},n.all=[],n.FILTER_CONTAINS=function(t,e){return RegExp($.regExpEscape(e.trim()),"i").test(t)},n.FILTER_STARTSWITH=function(t,e){return RegExp("^"+$.regExpEscape(e.trim()),"i").test(t)},n.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:e>t?-1:1};var s=Array.prototype.slice;return $.create=function(t,e){var i=document.createElement(t);for(var n in e){var s=e[n];if("inside"===n)$(s).appendChild(i);else if("around"===n){var r=$(s);r.parentNode.insertBefore(i,r),i.appendChild(r)}else n in i?i[n]=s:i.setAttribute(n,s)}return i},$.bind=function(t,e){if(t)for(var i in e){var n=e[i];i.split(/\s+/).forEach(function(e){t.addEventListener(e,n)})}},$.fire=function(t,e,i){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0);for(var s in i)n[s]=i[s];t.dispatchEvent(n)},$.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},"undefined"!=typeof Document&&("loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)),n.$=$,n.$$=e,"undefined"!=typeof self&&(self.Awesomplete=n),"object"==typeof exports&&(module.exports=n),n}();