"use strict";var UI={cardSearch:document.getElementById("cardSearch"),loadBar:document.querySelector(".load-bar"),deckList:document.querySelector(".deck-list"),cardList:document.querySelector(".deck-cards"),mainContainer:document.querySelector(".main-container"),cardTmp:document.getElementById("cardTemplate"),deckListTmp:document.getElementById("deckListTemplate"),newDeckContainer:{el:document.getElementById("newDeckContainer"),name:document.getElementById("newDeckName"),"class":document.getElementById("newDeckClass"),show:function(){UI.newDeckContainer.el.className="new-deck-container show"},hide:function(){UI.newDeckContainer.el.className="new-deck-container"}}},Card={toFind:"",isMatch:function(e){for(var n=0;n<e.length;n++)if(e[n].name===Card.toFind)return console.log(e[n]),e[n]},getJSON:function(e){var n=new XMLHttpRequest;n.onload=e,n.open("GET","data.json"),n.send()},returnCard:function(e){var n=e.target.responseText,t=JSON.parse(n);Card.isMatch(t.cards)},getCard:function(e){this.toFind=e,Card.getJSON(Card.returnCard)}},createNewDeck=function(){event.preventDefault();var e=Parse.Object.extend("Deck"),n=new e;n.save({name:UI.newDeckContainer.name.value,heroClass:UI.newDeckContainer["class"].value,played:0,wins:0,losses:0,winRate:"0%"},{success:function(){pullDeckList(),UI.newDeckContainer.hide()},error:function(e,n){}})},pullDeckList=function(){var e=Parse.Object.extend("Deck"),n=new Parse.Query(e);n.find({success:function(e){renderDeckList(e)},error:function(e,n){console.log("something fucked up")}})},pullDeckByIndex=function(e){UI.loadBar.className="load-bar loading";var n=this.innerText,t=Parse.Object.extend("Deck"),r=new Parse.Query(t);r.equalTo("name",n),r.find({success:function(e){renderDetail(e[0])},error:function(e,n){console.log("something fucked up")}})},renderDetail=function(e){document.getElementById("deck-portrait").className=e.get("heroClass"),UI.mainContainer.querySelector(".deck-name").innerHTML=e.get("name"),UI.mainContainer.querySelector(".played").innerHTML=e.get("played"),UI.mainContainer.querySelector(".wins").innerHTML=e.get("wins"),UI.mainContainer.querySelector(".losses").innerHTML=e.get("losses"),UI.mainContainer.querySelector(".winrate").innerHTML=e.get("winRate"),UI.loadBar.className="load-bar loaded"},renderDeckList=function(e){UI.deckList.innerHTML="";for(var n=0;n<e.length;n++){var t=UI.deckListTmp.content.cloneNode(!0);t.querySelector("li").setAttribute("data-index",n),t.querySelector("li").innerHTML+=e[n].get("name"),t.querySelector("li").onclick=pullDeckByIndex,UI.deckList.appendChild(t)}},searchCards=function(){var e=UI.cardSearch.value;console.log(e),Card.getCard(e)};UI.cardSearch.addEventListener("keyup",function(){searchCards()}),pullDeckList();